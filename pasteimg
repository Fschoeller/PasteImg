#! /usr/bin/python

import pygtk
pygtk.require('2.0')
import gtk
import os
import sys

class PasteImg:
	
	def __init__(self):
		self.paste_image(sys.argv[1])
	
	def callback_img(self, clipboard, pixbuf, f):
		if pixbuf is None:
			print "No image available!"
		else:
			print "Saving Image to %s" % f
			pixbuf.save(f, "png")
			
		gtk.main_quit()
			
	def paste_image(self, f):
		clipb = gtk.clipboard_get()
		#if clipb.wait_is_image_available():
		#	print "%r" % clipb.wait_is_image_available()
		clipb.request_image(self.callback_img, f)

	def main(self):
		gtk.main()

if __name__ == "__main__":
	pimg = PasteImg()
	pimg.main()
